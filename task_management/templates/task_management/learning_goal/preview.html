{% extends "base.html" %}
{% load static %}

{% block title %}Preview generated topic|ASCENSION{% endblock title %}
{% block body_class %}white-page{% endblock body_class %}

{% block contents %}
<div class='container'>
    <div class='my-div-style'>
        <div>
            <h1 class='mb-4'>Preview Generated LearningTopic</h1>
            <h2>&lt; Title:{{ draft.title }} ~Category:{{ draft.category.name }}~ &gt;</h2>
            <p>Learning tasks have been generated based on the learning goals you set.</p>
            <p>Uncheck the topics you don't need.</p>
        </div>
        <form action="{% url "task_management:goal_finalize" draft.id %}" method='POST'>
            {% csrf_token %}

            {% for topic in topics %}
                <div class='d-flex align-items-center'>
                    <input type="checkbox" name="main_topics" value="{{ topic.main_topic }}" checked>
                    <h3 class='ms-2 mb-0'>{{ topic.main_topic }}</h3>
                </div>

                <ul>
                    {% for sub_topic in topic.sub_topics %}
                        <li>
                            <input type="checkbox" name="{{ topic.main_topic }}_sub_topics" value="{{ sub_topic.sub_topic }}" checked>
                            <span class=''>{{ sub_topic.sub_topic }}</span>
                        </li>
                    {% endfor %}
                </ul>
            {% empty %}
                <p>Failed to generate learning plan. Please try again from setting learning goals.</p>
                <a href="{% url 'task_management:goal_set' user_interest.id %}" class='btn btn-primary mb-5'>Start over</a>
                <a href="{% url 'task_management:goal_list' user_interest.id %}" class='btn btn-secondary mb-5'>Cancel</a>
            {% endfor %}
            <div class='d-flex gap-3'>
                <button class='btn btn-primary mb-4'>Confirm</button>
                <button class='btn btn-secondary mb-4'>Cancel</button>
            </div>
        </form>
    </div>
</div>
{% endblock contents %}
